{
    "lesson-id": "lesson-6-group-by",
    "title": "Lesson 6",
    "subtitle": "GROUP BY Aggregations",
    "lesson-order": 6,
    "database-tables": [
        {
            "name": "Countries",
            "priority": 1
        }
    ],
    "exercise-tasks": [
        {
            "task-id": 6.1,
            "description": "Count the number of countries in each region, showing the region name and country count.",
            "correct-query": "SELECT Region, COUNT() FROM Countries\nGROUP BY Region",
            "verify-query": "SELECT Region, COUNT() FROM Countries GROUP BY Region",
            "order-sensitive": false,
            "exercise-order": 1,
            "initial-query": "SELECT * FROM Countries",
            "large-query": false,
            "allow-dml": false,
            "create-tables": false,
            "preview-allowed": true,
            "chatgpt-prompt": "Explain why 'SELECT Region, COUNT() FROM Countries GROUP BY Region' correctly counts the number of countries per region. How does the GROUP BY clause group rows by Region? How does COUNT() work on each group, and why must non-aggregated columns appear in GROUP BY?"
        },
        {
            "task-id": 6.2,
            "description": "Calculate the total population for each region, showing the region name and population count.",
            "correct-query": "SELECT Region, SUM(Population) FROM Countries\nGROUP BY Region",
            "verify-query": "SELECT Region, SUM(Population) FROM Countries GROUP BY Region",
            "order-sensitive": false,
            "exercise-order": 2,
            "initial-query": "SELECT * FROM Countries",
            "large-query": false,
            "allow-dml": false,
            "create-tables": false,
            "preview-allowed": true,
            "chatgpt-prompt": "Explain why 'SELECT Region, SUM(Population) FROM Countries GROUP BY Region' correctly calculates the total population per region. How does GROUP BY divide the table into regions? How does SUM(Population) aggregate values within each group?"
        },
        {
            "task-id": 6.3,
            "description": "Find regions where the total population exceeds 100 million, showing the region name and population count.",
            "correct-query": "SELECT Region, SUM(Population) FROM Countries\nGROUP BY Region\nHAVING SUM(Population) > 100000000",
            "verify-query": "SELECT Region, SUM(Population) FROM Countries GROUP BY Region HAVING SUM(Population) > 100000000",
            "order-sensitive": false,
            "exercise-order": 3,
            "initial-query": "SELECT * FROM Countries",
            "large-query": false,
            "allow-dml": false,
            "create-tables": false,
            "preview-allowed": true,
            "chatgpt-prompt": "Explain why 'SELECT Region, SUM(Population) FROM Countries GROUP BY Region HAVING SUM(Population) > 100000000' returns only regions with total population over 100 million. What is the role of the HAVING clause versus WHERE? How does GROUP BY interact with the aggregation SUM(Population)?"
        },
        {
            "task-id": 6.4,
            "description": "List regions with more than 2 countries, showing the region name and number of countries.",
            "correct-query": "SELECT Region, COUNT() FROM Countries\nGROUP BY Region\nHAVING COUNT() > 2",
            "verify-query": "SELECT Region, COUNT() FROM Countries GROUP BY Region HAVING COUNT() > 2",
            "order-sensitive": false,
            "exercise-order": 4,
            "initial-query": "SELECT * FROM Countries",
            "large-query": false,
            "allow-dml": false,
            "create-tables": false,
            "preview-allowed": true,
            "chatgpt-prompt": "Explain why 'SELECT Region, COUNT() FROM Countries GROUP BY Region HAVING COUNT() > 2' returns only regions with more than two countries. How does GROUP BY aggregate rows by region? How does the HAVING clause filter groups based on the COUNT() result, and why is COUNT() used here?"
        }
    ]
}
